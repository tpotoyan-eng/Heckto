
<div class="details-container container">
  <div class="gallery-section">
    <div class="thumbnails">
      @for (item of similarItems(); track $index) {
        <img [src]="item.url" [alt]="item.name" />
      }
    </div>
    <div class="main-preview">
      <img [src]="product()?.url" [alt]="product()?.name" />
    </div>
  </div>

  <div class="info-section">
    <h3 class="heading-3">{{ product()?.name || 'Headphones' }}</h3>

    <div class="rating">
      @for (star of stars(); track $index) {
        <span class="fa fa-star star" [class.checked]="star === true"></span>
      }
    </div>

    <div class="pricing">
      <span class="current">${{product()?.currentPrice | number : numFormat.Currency }}</span>
      <span class="discounted">${{product()?.originalPrice | number : numFormat.Currency }}</span>
    </div>

    <p class="description">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris tellus porttitor purus, et
      volutpat sit.
    </p>

    <div class="actions">
      <button class="btn-primary" (click)="addToCard(true)">Add To Cart</button>
      <button class="wishlist-btn"><img src="Black-heart.svg" alt="heart" /></button>
    </div>
  </div>
</div>

<section class="tabs-wrapper">
  <div class="container flex-box">
    <nav class="tabs-nav">
      @for (navItem of productDetailsNav; track $index) {
        <a [className]="navItem.className" (click)="handleNavigation()">{{ navItem.value }}</a>
      }
    </nav>
    <div class="tab-content flex-box">
      <h4 class="heading-4">Varius tempor.</h4>
      <p class="paragraph">{{ product()?.description }}</p>
    </div>
    <div class="tab-content flex-column">
      <h4 class="heading-4">More Detailes</h4>
      <div class="flex-column">
        @for (detail of productMoreDetailsInfo; track $index) {
          <div class="flex-container">
            <img src="Bottom_arrow.svg" />
            <span class="paragraph">{{ detail }}</span>
          </div>
        }
      </div>
    </div>
  </div>
</section>

<section class="relatedProducts">
  <div class="flex container" style="margin-top: 3rem">
    <h2 class="heading-2">Related Products</h2>
  </div>
  <div class="container products">
    @for (item of similarItems(); track $index) {
      <app-product [product]="item" [typeProduct]="''"></app-product>
    }
  </div>
</section>

@if (showCard()) {
  <div class="card-wrapper" (click)="closeCardForm()">
    <div class="card-modal">
      <h3 class="heading-3">Enter Card Details</h3>

      <form
        class="card-form"
        [formGroup]="paymentForm"
        (ngSubmit)="onPay()"
        (click)="$event.stopPropagation()"
      >
        @for (cartInfo of cartFormInfo; track $index) {
          <div class="form-group">
            <label>{{ cartInfo.labelValue }}</label>
            <input
              [formControlName]="cartInfo.name"
              [type]="cartInfo.type"
              [placeholder]="cartInfo.placeholder"
              [maxLength]="cartInfo.maxlength"
            />
          </div>
        }
        <div class="form-actions">
          <button type="submit" class="btn-primary" [disabled]="paymentForm.invalid">
            Pay Now
          </button>
          <button type="button" class="btn-secondary" (click)="closeCardForm()">Cancel</button>
        </div>
      </form>
    </div>
  </div>
}
